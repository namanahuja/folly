load("@fbcode_macros//build_defs:cpp_library.bzl", "cpp_library")

oncall("fbcode_entropy_wardens_folly")

cpp_library(
    name = "bit_iterator_detail",
    headers = ["BitIteratorDetail.h"],
    exported_deps = [
        "folly//folly/portability:sys_types",
    ],
    exported_external_deps = [
        "boost",
    ],
)

cpp_library(
    name = "f14_intrinsics_availability",
    headers = [
        "F14IntrinsicsAvailability.h",
    ],
    exported_deps = [
        "folly//folly:portability",
    ],
)

cpp_library(
    name = "f14_defaults",
    headers = [
        "F14Defaults.h",
    ],
    exported_deps = [
        "folly//folly/container:heterogeneous_access_fwd",
    ],
)

cpp_library(
    name = "f14_hash_detail",
    srcs = [
        "F14Table.cpp",
    ],
    headers = [
        "F14MapFallback.h",
        "F14Policy.h",
        "F14SetFallback.h",
        "F14Table.h",
    ],
    exported_deps = [
        ":f14_defaults",
        ":f14_intrinsics_availability",
        ":f14_mask",
        ":util",
        "folly//folly:bits",
        "folly//folly:constexpr_math",
        "folly//folly:likely",
        "folly//folly:memory",
        "folly//folly:optional",
        "folly//folly:portability",
        "folly//folly:scope_guard",
        "folly//folly:traits",
        "folly//folly:unit",
        "folly//folly/container:heterogeneous_access",
        "folly//folly/functional:invoke",
        "folly//folly/hash:hash",
        "folly//folly/lang:align",
        "folly//folly/lang:assume",
        "folly//folly/lang:exception",
        "folly//folly/lang:pretty",
        "folly//folly/lang:safe_assert",
        "folly//folly/memory:malloc",
        "folly//folly/portability:builtins",
    ],
)

cpp_library(
    name = "f14_mask",
    headers = [
        "F14Mask.h",
    ],
    exported_deps = [
        ":f14_intrinsics_availability",
        "folly//folly:bits",
        "folly//folly:constexpr_math",
        "folly//folly:likely",
        "folly//folly:portability",
        "folly//folly/lang:assume",
        "folly//folly/lang:safe_assert",
    ],
)

cpp_library(
    name = "tape_detail",
    headers = [
        "tape_detail.h",
    ],
    exported_deps = [
        "folly//folly:portability",
        "folly//folly:range",
        "folly//folly/container:iterator",
        "folly//folly/container:range_traits",
        "folly//folly/lang:hint",
        "folly//folly/memory:uninitialized_memory_hacks",
    ],
)

cpp_library(
    name = "util",
    headers = [
        "Util.h",
    ],
    exported_deps = [
        "folly//folly:traits",
        "folly//folly/container:iterator",
        "folly//folly/functional:apply_tuple",
    ],
)
